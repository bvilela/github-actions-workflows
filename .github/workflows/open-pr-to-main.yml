on:
  workflow_call:
    inputs:
      title:
        description: PR Title
        default: '[Example] Simple demo'
        type: string
        required: false
      commit-message:
        description: Commit Message PR
        default: 'Simple demo'
        type: string
        required: false
      body:
        description: PR Body
        default: >
          This PR is auto-generated by 
          [create-pull-request](https://github.com/peter-evans/create-pull-request).
        type: string
        required: false

jobs:
  open-pr-to-main:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
          
      - name: Get Current Branch Name
        shell: bash
        run: echo "branch=${GITHUB_HEAD_REF:-${GITHUB_REF#refs/heads/}}" >> $GITHUB_OUTPUT
        id: extract_branch

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ steps.extract_branch.outputs.branch }}
          title: ${{ inputs.title }}
          commit-message: ${{ inputs.commit-message }}
          body: ${{ inputs.body }}
